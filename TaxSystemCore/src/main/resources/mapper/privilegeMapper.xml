<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ey.tax.core.dao.PrivilegeDAO">
    <select id="findRolesByUser" parameterType="long" resultType="com.ey.tax.entity.SysRole">
        select tsr.* from t_sys_role tsr
        left join t_sys_user_role_ref tsurr
        on tsr.id = tsurr.role_id
        left join t_sys_user tsu
        on tsurr.user_id = tsu.id
        where tsu.id = #{userId};
    </select>

    <select id="findPermissionsByRole" parameterType="long" resultType="com.ey.tax.entity.SysPermission">
        select tsp.* from t_sys_permission tsp
        left join t_sys_role_permission_ref tsrpr
        on tsp.id = tsrpr.permission_id
        left join t_sys_role tsr
        on tsr.id = tsrpr.role_id
        where tsr.id = #{roleId};
    </select>

</mapper>